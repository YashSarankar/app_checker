{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yashs/development/app_checker/src/app/tracker/page.js"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { ArrowLeft, Loader2, Hash, Trophy, Star, Download } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { useSearchParams } from 'next/navigation'\r\nimport { Suspense } from 'react'\r\n\r\nfunction TrackerContent() {\r\n    const searchParams = useSearchParams()\r\n    const appId = searchParams.get('appId')\r\n    const initialTitle = searchParams.get('title')\r\n    const initialIcon = searchParams.get('icon')\r\n    const initialDeveloper = searchParams.get('developer')\r\n\r\n    const [keyword, setKeyword] = useState('')\r\n    const [isCheckingRank, setIsCheckingRank] = useState(false)\r\n    const [rankResult, setRankResult] = useState(null)\r\n    const [appDetails, setAppDetails] = useState(null)\r\n    const [isLoadingDetails, setIsLoadingDetails] = useState(false)\r\n    const [history, setHistory] = useState([])\r\n\r\n    useEffect(() => {\r\n        if (appId) {\r\n            fetchAppDetails()\r\n            loadHistory()\r\n        }\r\n    }, [appId])\r\n\r\n    const fetchAppDetails = async (forceRefresh = false) => {\r\n        if (typeof window !== 'undefined' && !forceRefresh) {\r\n            const cached = localStorage.getItem(`details_${appId}`)\r\n            if (cached) {\r\n                const { data, timestamp } = JSON.parse(cached)\r\n                const isFresh = Date.now() - timestamp < 24 * 60 * 60 * 1000 // 24 hours\r\n                if (isFresh) {\r\n                    setAppDetails(data)\r\n                    return\r\n                }\r\n            }\r\n        }\r\n\r\n        setIsLoadingDetails(true)\r\n        try {\r\n            const { data } = await axios.get(`/api/apps/details?appId=${appId}`)\r\n            setAppDetails(data)\r\n            if (typeof window !== 'undefined') {\r\n                localStorage.setItem(`details_${appId}`, JSON.stringify({\r\n                    data,\r\n                    timestamp: Date.now()\r\n                }))\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to fetch details')\r\n        } finally {\r\n            setIsLoadingDetails(false)\r\n        }\r\n    }\r\n\r\n    const loadHistory = () => {\r\n        if (typeof window !== 'undefined') {\r\n            const savedHistory = localStorage.getItem(`history_${appId}`)\r\n            if (savedHistory) setHistory(JSON.parse(savedHistory))\r\n        }\r\n    }\r\n\r\n    const saveToHistory = (result) => {\r\n        if (typeof window !== 'undefined') {\r\n            const newEntry = { ...result, id: Date.now(), timestamp: new Date().toISOString() }\r\n            const updatedHistory = [newEntry, ...history].slice(0, 10)\r\n            setHistory(updatedHistory)\r\n            localStorage.setItem(`history_${appId}`, JSON.stringify(updatedHistory))\r\n        }\r\n    }\r\n\r\n    const checkRank = async (e, customTerm = null, forceRefresh = false) => {\r\n        if (e) e.preventDefault()\r\n        const termToCheck = customTerm || keyword.trim()\r\n        if (!appId || !termToCheck) return\r\n\r\n        if (customTerm) setKeyword(termToCheck)\r\n\r\n        // Check if we have a fresh result in history (last 1 hour)\r\n        if (!forceRefresh) {\r\n            const existingEntry = history.find(h => h.term.toLowerCase() === termToCheck.toLowerCase())\r\n            if (existingEntry) {\r\n                const isFresh = Date.now() - new Date(existingEntry.timestamp).getTime() < 60 * 60 * 1000 // 1 hour\r\n                if (isFresh) {\r\n                    setRankResult(existingEntry)\r\n                    return\r\n                }\r\n            }\r\n        }\r\n\r\n        setIsCheckingRank(true)\r\n        setRankResult(null)\r\n        try {\r\n            const { data } = await axios.post('/api/keywords', { appId, term: termToCheck })\r\n            setRankResult(data)\r\n            saveToHistory(data)\r\n        } catch (error) {\r\n            console.error('Failed to check rank')\r\n        } finally {\r\n            setIsCheckingRank(false)\r\n        }\r\n    }\r\n\r\n    if (!appId) return (\r\n        <div className=\"flex flex-col items-center justify-center py-20 text-[var(--text-muted)]\">\r\n            <p className=\"font-medium text-sm\">No app selected</p>\r\n            <Link href=\"/\" className=\"mt-4 text-blue-600 hover:text-blue-700 text-sm font-medium\">Return Home</Link>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[var(--bg)]\">\r\n            <div className=\"max-w-5xl mx-auto px-6 py-8\">\r\n                {/* Header */}\r\n                <header className=\"mb-8\">\r\n                    <Link\r\n                        href=\"/\"\r\n                        className=\"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6 font-medium transition-colors\"\r\n                    >\r\n                        <ArrowLeft className=\"w-4 h-4\" />\r\n                        Apps\r\n                    </Link>\r\n\r\n                    <div className=\"flex items-center gap-6 mb-6\">\r\n                        <img\r\n                            src={appDetails?.icon || initialIcon}\r\n                            className=\"w-20 h-20 rounded-2xl shadow-md\"\r\n                            alt={appDetails?.title || initialTitle}\r\n                        />\r\n                        <div className=\"flex-1\">\r\n                            <h1 className=\"text-3xl font-semibold text-[var(--text-main)] mb-1 tracking-tight\">\r\n                                {appDetails?.title || initialTitle}\r\n                            </h1>\r\n                            <p className=\"text-[var(--text-muted)]\">{appDetails?.developer || initialDeveloper}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Stats */}\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"glass-card p-4 min-w-0\">\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                <Star className=\"w-4 h-4 text-yellow-500 flex-shrink-0\" />\r\n                                <span className=\"text-sm text-[var(--text-muted)] font-medium truncate\">Rating</span>\r\n                            </div>\r\n                            <p className=\"text-xl md:text-2xl font-semibold text-[var(--text-main)] truncate\">\r\n                                {appDetails?.score?.toFixed(1) || '—'}\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"glass-card p-4 min-w-0\">\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                <Download className=\"w-4 h-4 text-blue-500 flex-shrink-0\" />\r\n                                <span className=\"text-sm text-[var(--text-muted)] font-medium truncate\">Installs</span>\r\n                            </div>\r\n                            <p className=\"text-xl md:text-2xl font-semibold text-[var(--text-main)] truncate\">\r\n                                {appDetails?.installs || '—'}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    {/* Main Content */}\r\n                    <div className=\"lg:col-span-2 space-y-6\">\r\n                        {/* Keyword Tracker */}\r\n                        <div className=\"glass-card p-6\">\r\n                            <h2 className=\"text-lg font-semibold text-[var(--text-main)] mb-4 flex items-center gap-2\">\r\n                                <Hash className=\"w-5 h-5 text-blue-600\" />\r\n                                Keyword Ranking\r\n                            </h2>\r\n\r\n                            <form onSubmit={checkRank} className=\"mb-4\">\r\n                                <div className=\"flex gap-3\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Enter keyword...\"\r\n                                        className=\"pro-input flex-1\"\r\n                                        value={keyword}\r\n                                        onChange={(e) => setKeyword(e.target.value)}\r\n                                    />\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={isCheckingRank || !keyword.trim()}\r\n                                        className=\"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-[var(--input-bg)] disabled:text-[var(--text-muted)] text-white rounded-lg font-medium transition-colors\"\r\n                                    >\r\n                                        {isCheckingRank ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : \"Check\"}\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n\r\n                            <p className=\"text-sm text-[var(--text-muted)]\">\r\n                                Search top 250 apps for this keyword\r\n                            </p>\r\n                        </div>\r\n\r\n                        {/* Rank Result */}\r\n                        <AnimatePresence mode=\"wait\">\r\n                            {rankResult && (\r\n                                <motion.div\r\n                                    key={rankResult.term}\r\n                                    initial={{ opacity: 0, y: 10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    exit={{ opacity: 0 }}\r\n                                    className=\"glass-card p-8 text-center\"\r\n                                >\r\n                                    <p className=\"text-sm font-medium text-[var(--text-muted)] mb-3 uppercase tracking-wide\">\r\n                                        Rank for \"{rankResult.term}\"\r\n                                    </p>\r\n                                    <div className=\"text-6xl font-bold text-[var(--text-main)] mb-2\">\r\n                                        {rankResult.position === '250+' ? '250+' : `#${rankResult.position}`}\r\n                                    </div>\r\n                                    <p className=\"text-sm text-[var(--text-muted)]\">\r\n                                        {rankResult.position === '250+' ? \"Not found in top 250\" : \"Currently ranked\"}\r\n                                    </p>\r\n                                </motion.div>\r\n                            )}\r\n                        </AnimatePresence>\r\n                    </div>\r\n\r\n                    {/* Sidebar */}\r\n                    <div className=\"glass-card p-5\">\r\n                        <h3 className=\"text-base font-semibold text-[var(--text-main)] mb-4\">Recent Checks</h3>\r\n                        <div className=\"space-y-2\">\r\n                            {history.map((entry) => (\r\n                                <div\r\n                                    key={entry.id}\r\n                                    onClick={() => checkRank(null, entry.term)}\r\n                                    className=\"p-3 bg-[var(--input-bg)] hover:bg-[var(--card-border)] rounded-lg cursor-pointer transition-colors\"\r\n                                >\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <span className=\"text-sm font-medium text-[var(--text-main)] truncate flex-1\">\r\n                                            {entry.term}\r\n                                        </span>\r\n                                        <span className={`text-sm font-semibold ml-2 ${entry.position === '250+' ? 'text-[var(--text-muted)]' : 'text-blue-600'}`}>\r\n                                            {entry.position === '250+' ? '—' : `#${entry.position}`}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {history.length === 0 && (\r\n                                <p className=\"text-sm text-[var(--text-muted)] text-center py-4\">\r\n                                    No checks yet\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default function KeywordTrackerPage() {\r\n    return (\r\n        <Suspense fallback={\r\n            <div className=\"flex justify-center py-20\">\r\n                <Loader2 className=\"w-8 h-8 animate-spin text-[var(--text-muted)]\" />\r\n            </div>\r\n        }>\r\n            <TrackerContent />\r\n        </Suspense>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAPA;;;;;;;;;AAUA,SAAS;IACL,MAAM,eAAe,IAAA,qJAAe;IACpC,MAAM,QAAQ,aAAa,GAAG,CAAC;IAC/B,MAAM,eAAe,aAAa,GAAG,CAAC;IACtC,MAAM,cAAc,aAAa,GAAG,CAAC;IACrC,MAAM,mBAAmB,aAAa,GAAG,CAAC;IAE1C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAEzC,IAAA,kNAAS,EAAC;QACN,IAAI,OAAO;YACP;YACA;QACJ;IACJ,GAAG;QAAC;KAAM;IAEV,MAAM,kBAAkB,OAAO,eAAe,KAAK;QAC/C;;QAYA,oBAAoB;QACpB,IAAI;YACA,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,gJAAK,CAAC,GAAG,CAAC,CAAC,wBAAwB,EAAE,OAAO;YACnE,cAAc;YACd;;QAMJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC;QAClB,SAAU;YACN,oBAAoB;QACxB;IACJ;IAEA,MAAM,cAAc;QAChB;;IAIJ;IAEA,MAAM,gBAAgB,CAAC;QACnB;;IAMJ;IAEA,MAAM,YAAY,OAAO,GAAG,aAAa,IAAI,EAAE,eAAe,KAAK;QAC/D,IAAI,GAAG,EAAE,cAAc;QACvB,MAAM,cAAc,cAAc,QAAQ,IAAI;QAC9C,IAAI,CAAC,SAAS,CAAC,aAAa;QAE5B,IAAI,YAAY,WAAW;QAE3B,2DAA2D;QAC3D,IAAI,CAAC,cAAc;YACf,MAAM,gBAAgB,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,WAAW,OAAO,YAAY,WAAW;YACxF,IAAI,eAAe;gBACf,MAAM,UAAU,KAAK,GAAG,KAAK,IAAI,KAAK,cAAc,SAAS,EAAE,OAAO,KAAK,KAAK,KAAK,KAAK,SAAS;;gBACnG,IAAI,SAAS;oBACT,cAAc;oBACd;gBACJ;YACJ;QACJ;QAEA,kBAAkB;QAClB,cAAc;QACd,IAAI;YACA,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,gJAAK,CAAC,IAAI,CAAC,iBAAiB;gBAAE;gBAAO,MAAM;YAAY;YAC9E,cAAc;YACd,cAAc;QAClB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC;QAClB,SAAU;YACN,kBAAkB;QACtB;IACJ;IAEA,IAAI,CAAC,OAAO,qBACR,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAE,WAAU;0BAAsB;;;;;;0BACnC,8OAAC,uKAAI;gBAAC,MAAK;gBAAI,WAAU;0BAA6D;;;;;;;;;;;;IAI9F,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BAEX,8OAAC;oBAAO,WAAU;;sCACd,8OAAC,uKAAI;4BACD,MAAK;4BACL,WAAU;;8CAEV,8OAAC,6NAAS;oCAAC,WAAU;;;;;;gCAAY;;;;;;;sCAIrC,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCACG,KAAK,YAAY,QAAQ;oCACzB,WAAU;oCACV,KAAK,YAAY,SAAS;;;;;;8CAE9B,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAG,WAAU;sDACT,YAAY,SAAS;;;;;;sDAE1B,8OAAC;4CAAE,WAAU;sDAA4B,YAAY,aAAa;;;;;;;;;;;;;;;;;;sCAK1E,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAI,WAAU;;8DACX,8OAAC,0MAAI;oDAAC,WAAU;;;;;;8DAChB,8OAAC;oDAAK,WAAU;8DAAwD;;;;;;;;;;;;sDAE5E,8OAAC;4CAAE,WAAU;sDACR,YAAY,OAAO,QAAQ,MAAM;;;;;;;;;;;;8CAG1C,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAI,WAAU;;8DACX,8OAAC,sNAAQ;oDAAC,WAAU;;;;;;8DACpB,8OAAC;oDAAK,WAAU;8DAAwD;;;;;;;;;;;;sDAE5E,8OAAC;4CAAE,WAAU;sDACR,YAAY,YAAY;;;;;;;;;;;;;;;;;;;;;;;;8BAMzC,8OAAC;oBAAI,WAAU;;sCAEX,8OAAC;4BAAI,WAAU;;8CAEX,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAG,WAAU;;8DACV,8OAAC,0MAAI;oDAAC,WAAU;;;;;;gDAA0B;;;;;;;sDAI9C,8OAAC;4CAAK,UAAU;4CAAW,WAAU;sDACjC,cAAA,8OAAC;gDAAI,WAAU;;kEACX,8OAAC;wDACG,MAAK;wDACL,aAAY;wDACZ,WAAU;wDACV,OAAO;wDACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;kEAE9C,8OAAC;wDACG,MAAK;wDACL,UAAU,kBAAkB,CAAC,QAAQ,IAAI;wDACzC,WAAU;kEAET,+BAAiB,8OAAC,4NAAO;4DAAC,WAAU;;;;;mEAA4B;;;;;;;;;;;;;;;;;sDAK7E,8OAAC;4CAAE,WAAU;sDAAmC;;;;;;;;;;;;8CAMpD,8OAAC,4MAAe;oCAAC,MAAK;8CACjB,4BACG,8OAAC,oMAAM,CAAC,GAAG;wCAEP,SAAS;4CAAE,SAAS;4CAAG,GAAG;wCAAG;wCAC7B,SAAS;4CAAE,SAAS;4CAAG,GAAG;wCAAE;wCAC5B,MAAM;4CAAE,SAAS;wCAAE;wCACnB,WAAU;;0DAEV,8OAAC;gDAAE,WAAU;;oDAA4E;oDAC1E,WAAW,IAAI;oDAAC;;;;;;;0DAE/B,8OAAC;gDAAI,WAAU;0DACV,WAAW,QAAQ,KAAK,SAAS,SAAS,CAAC,CAAC,EAAE,WAAW,QAAQ,EAAE;;;;;;0DAExE,8OAAC;gDAAE,WAAU;0DACR,WAAW,QAAQ,KAAK,SAAS,yBAAyB;;;;;;;uCAb1D,WAAW,IAAI;;;;;;;;;;;;;;;;sCAqBpC,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAG,WAAU;8CAAuD;;;;;;8CACrE,8OAAC;oCAAI,WAAU;;wCACV,QAAQ,GAAG,CAAC,CAAC,sBACV,8OAAC;gDAEG,SAAS,IAAM,UAAU,MAAM,MAAM,IAAI;gDACzC,WAAU;0DAEV,cAAA,8OAAC;oDAAI,WAAU;;sEACX,8OAAC;4DAAK,WAAU;sEACX,MAAM,IAAI;;;;;;sEAEf,8OAAC;4DAAK,WAAW,CAAC,2BAA2B,EAAE,MAAM,QAAQ,KAAK,SAAS,6BAA6B,iBAAiB;sEACpH,MAAM,QAAQ,KAAK,SAAS,MAAM,CAAC,CAAC,EAAE,MAAM,QAAQ,EAAE;;;;;;;;;;;;+CAT1D,MAAM,EAAE;;;;;wCAcpB,QAAQ,MAAM,KAAK,mBAChB,8OAAC;4CAAE,WAAU;sDAAoD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUjG;AAEe,SAAS;IACpB,qBACI,8OAAC,iNAAQ;QAAC,wBACN,8OAAC;YAAI,WAAU;sBACX,cAAA,8OAAC,4NAAO;gBAAC,WAAU;;;;;;;;;;;kBAGvB,cAAA,8OAAC;;;;;;;;;;AAGb"}}]
}