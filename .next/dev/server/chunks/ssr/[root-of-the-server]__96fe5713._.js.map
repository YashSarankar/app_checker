{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yashs/development/app_checker/src/app/add-app/page.js"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport axios from 'axios'\r\nimport { Search, Loader2, ArrowLeft, ChevronRight } from 'lucide-react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/navigation'\r\n\r\nexport default function AddAppPage() {\r\n    const router = useRouter()\r\n    const [searchTerm, setSearchTerm] = useState('')\r\n    const [searchResults, setSearchResults] = useState([])\r\n    const [isSearching, setIsSearching] = useState(false)\r\n    const [error, setError] = useState(null)\r\n\r\n    const saveApp = (app) => {\r\n        if (typeof window !== 'undefined') {\r\n            const saved = localStorage.getItem('savedApps')\r\n            const savedApps = saved ? JSON.parse(saved) : []\r\n\r\n            const existing = savedApps.find(a => a.appId === app.appId)\r\n            if (!existing) {\r\n                const updated = [...savedApps, app]\r\n                localStorage.setItem('savedApps', JSON.stringify(updated))\r\n            }\r\n\r\n            router.push(`/tracker?appId=${app.appId}&title=${encodeURIComponent(app.title)}&icon=${encodeURIComponent(app.icon)}&developer=${encodeURIComponent(app.developer)}`)\r\n        }\r\n    }\r\n\r\n    const processSearch = async (e) => {\r\n        e.preventDefault()\r\n        const term = searchTerm.trim()\r\n        if (!term) return\r\n\r\n        setError(null)\r\n        setSearchResults([])\r\n\r\n        // Check if URL\r\n        if (term.includes('play.google.com')) {\r\n            try {\r\n                const url = new URL(term);\r\n                const id = url.searchParams.get('id');\r\n                if (id) {\r\n                    fetchAndSaveApp(id)\r\n                    return;\r\n                }\r\n            } catch (e) { }\r\n        }\r\n\r\n        // Check if Package ID\r\n        if (term.includes('.') && !term.includes(' ')) {\r\n            fetchAndSaveApp(term)\r\n            return;\r\n        }\r\n\r\n        // Search\r\n        setIsSearching(true)\r\n        try {\r\n            const { data } = await axios.get(`/api/apps/search?term=${term}`)\r\n            if (data.length === 0) {\r\n                setError('No apps found. Try a different search term.')\r\n            } else {\r\n                setSearchResults(data)\r\n            }\r\n        } catch (error) {\r\n            setError('Search failed. Please try again.')\r\n        } finally {\r\n            setIsSearching(false)\r\n        }\r\n    }\r\n\r\n    const fetchAndSaveApp = async (appId) => {\r\n        setIsSearching(true)\r\n        try {\r\n            const { data } = await axios.get(`/api/apps/details?appId=${appId}`)\r\n            saveApp({\r\n                appId: data.appId,\r\n                title: data.title,\r\n                icon: data.icon,\r\n                developer: data.developer\r\n            })\r\n        } catch (error) {\r\n            setError('Failed to fetch app details. Please check the package ID or URL.')\r\n            setIsSearching(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[var(--bg)]\">\r\n            <div className=\"max-w-3xl mx-auto px-6 py-8\">\r\n                {/* Header */}\r\n                <header className=\"mb-8\">\r\n                    <Link\r\n                        href=\"/\"\r\n                        className=\"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6 font-medium transition-colors\"\r\n                    >\r\n                        <ArrowLeft className=\"w-4 h-4\" />\r\n                        Back\r\n                    </Link>\r\n\r\n                    <h1 className=\"text-4xl font-semibold text-[var(--text-main)] mb-2 tracking-tight\">\r\n                        Add App\r\n                    </h1>\r\n                    <p className=\"text-[var(--text-muted)] text-base\">\r\n                        Search by name, package ID, or Play Store URL\r\n                    </p>\r\n                </header>\r\n\r\n                {/* Search */}\r\n                <div className=\"mb-8\">\r\n                    <form onSubmit={processSearch} className=\"relative\">\r\n                        <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)] w-5 h-5\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search for an app...\"\r\n                            className=\"pro-input pl-12 pr-24 py-3.5 text-base w-full\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                            autoFocus\r\n                        />\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isSearching || !searchTerm.trim()}\r\n                            className=\"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-[var(--input-bg)] disabled:text-[var(--text-muted)] text-white rounded-md font-medium text-sm transition-colors\"\r\n                        >\r\n                            {isSearching ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : 'Search'}\r\n                        </button>\r\n                    </form>\r\n\r\n                    {/* Helper */}\r\n                    <div className=\"mt-4 p-4 bg-[var(--input-bg)] rounded-lg\">\r\n                        <p className=\"text-sm text-[var(--text-muted)] mb-2 font-medium\">Examples:</p>\r\n                        <ul className=\"space-y-1 text-sm text-[var(--text-muted)]\">\r\n                            <li>• App name: <code className=\"text-[var(--text-main)] bg-[var(--card-bg)] px-1.5 py-0.5 rounded\">Instagram</code></li>\r\n                            <li>• Package ID: <code className=\"text-[var(--text-main)] bg-[var(--card-bg)] px-1.5 py-0.5 rounded\">com.instagram.android</code></li>\r\n                            <li>• Play Store URL</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Error */}\r\n                <AnimatePresence mode=\"wait\">\r\n                    {error && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: -10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -10 }}\r\n                            className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\"\r\n                        >\r\n                            <p className=\"text-sm text-red-600 font-medium\">{error}</p>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                {/* Results */}\r\n                <AnimatePresence mode=\"wait\">\r\n                    {searchResults.length > 0 && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                        >\r\n                            <h2 className=\"text-lg font-semibold text-[var(--text-main)] mb-4\">\r\n                                {searchResults.length} {searchResults.length === 1 ? 'result' : 'results'}\r\n                            </h2>\r\n\r\n                            <div className=\"space-y-3\">\r\n                                {searchResults.map((app, index) => (\r\n                                    <motion.div\r\n                                        key={app.appId}\r\n                                        initial={{ opacity: 0, x: -20 }}\r\n                                        animate={{ opacity: 1, x: 0 }}\r\n                                        transition={{ delay: index * 0.05 }}\r\n                                        onClick={() => saveApp(app)}\r\n                                        className=\"glass-card p-4 cursor-pointer hover:shadow-md transition-all duration-200 group\"\r\n                                    >\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <img\r\n                                                src={app.icon}\r\n                                                className=\"w-14 h-14 rounded-xl shadow-sm\"\r\n                                                alt={app.title}\r\n                                            />\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <h3 className=\"font-semibold text-[var(--text-main)] text-base mb-0.5 truncate\">\r\n                                                    {app.title}\r\n                                                </h3>\r\n                                                <p className=\"text-sm text-[var(--text-muted)] truncate mb-1\">\r\n                                                    {app.developer}\r\n                                                </p>\r\n                                                <p className=\"text-xs font-mono text-[var(--text-muted)] truncate\">\r\n                                                    {app.appId}\r\n                                                </p>\r\n                                            </div>\r\n                                            <ChevronRight className=\"w-5 h-5 text-[var(--text-muted)] group-hover:translate-x-0.5 transition-transform flex-shrink-0\" />\r\n                                        </div>\r\n                                    </motion.div>\r\n                                ))}\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}