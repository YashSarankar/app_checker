{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yashs/development/app_checker/src/app/api/apps/reviews/route.js"],"sourcesContent":["import gplay from 'google-play-scraper';\r\nimport { NextResponse } from 'next/server';\r\n\r\nexport async function GET(request) {\r\n    const { searchParams } = new URL(request.url);\r\n    const appId = searchParams.get('appId');\r\n    const country = searchParams.get('country') || 'us';\r\n\r\n    if (!appId) return NextResponse.json({ reviews: [], statistics: {} }, { status: 400 });\r\n\r\n    try {\r\n        const results = await gplay.reviews({\r\n            appId,\r\n            sort: gplay.sort.NEWEST,\r\n            num: 15,\r\n            country\r\n        });\r\n\r\n        // Simple mock sentiment analysis based on keyword frequency\r\n        const positiveWords = ['good', 'great', 'awesome', 'best', 'useful', 'nice', 'smooth', 'excellent', 'love', 'easy'];\r\n        const negativeWords = ['bad', 'worst', 'poor', 'slow', 'crash', 'bugs', 'terrible', 'useless', 'difficult', 'waste'];\r\n\r\n        let posCount = 0;\r\n        let negCount = 0;\r\n\r\n        const processedReviews = results.data.map(review => {\r\n            const text = review.text.toLowerCase();\r\n            let sentiment = 'neutral';\r\n\r\n            const hasPos = positiveWords.some(word => text.includes(word));\r\n            const hasNeg = negativeWords.some(word => text.includes(word));\r\n\r\n            if (hasPos && !hasNeg) {\r\n                sentiment = 'positive';\r\n                posCount++;\r\n            } else if (hasNeg && !hasPos) {\r\n                sentiment = 'negative';\r\n                negCount++;\r\n            }\r\n\r\n            return {\r\n                userName: review.userName,\r\n                text: review.text,\r\n                score: review.score,\r\n                date: review.date,\r\n                sentiment\r\n            };\r\n        });\r\n\r\n        return NextResponse.json({\r\n            reviews: processedReviews,\r\n            statistics: {\r\n                totalAnalysed: processedReviews.length,\r\n                positive: posCount,\r\n                negative: negCount,\r\n                neutral: processedReviews.length - (posCount + negCount)\r\n            }\r\n        });\r\n    } catch (error) {\r\n        console.error('Reviews error:', error);\r\n        return NextResponse.json({ reviews: [], statistics: {} });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAO;IAC7B,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,QAAQ,aAAa,GAAG,CAAC;IAC/B,MAAM,UAAU,aAAa,GAAG,CAAC,cAAc;IAE/C,IAAI,CAAC,OAAO,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,SAAS,EAAE;QAAE,YAAY,CAAC;IAAE,GAAG;QAAE,QAAQ;IAAI;IAEpF,IAAI;QACA,MAAM,UAAU,MAAM,+JAAK,CAAC,OAAO,CAAC;YAChC;YACA,MAAM,+JAAK,CAAC,IAAI,CAAC,MAAM;YACvB,KAAK;YACL;QACJ;QAEA,4DAA4D;QAC5D,MAAM,gBAAgB;YAAC;YAAQ;YAAS;YAAW;YAAQ;YAAU;YAAQ;YAAU;YAAa;YAAQ;SAAO;QACnH,MAAM,gBAAgB;YAAC;YAAO;YAAS;YAAQ;YAAQ;YAAS;YAAQ;YAAY;YAAW;YAAa;SAAQ;QAEpH,IAAI,WAAW;QACf,IAAI,WAAW;QAEf,MAAM,mBAAmB,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAA;YACtC,MAAM,OAAO,OAAO,IAAI,CAAC,WAAW;YACpC,IAAI,YAAY;YAEhB,MAAM,SAAS,cAAc,IAAI,CAAC,CAAA,OAAQ,KAAK,QAAQ,CAAC;YACxD,MAAM,SAAS,cAAc,IAAI,CAAC,CAAA,OAAQ,KAAK,QAAQ,CAAC;YAExD,IAAI,UAAU,CAAC,QAAQ;gBACnB,YAAY;gBACZ;YACJ,OAAO,IAAI,UAAU,CAAC,QAAQ;gBAC1B,YAAY;gBACZ;YACJ;YAEA,OAAO;gBACH,UAAU,OAAO,QAAQ;gBACzB,MAAM,OAAO,IAAI;gBACjB,OAAO,OAAO,KAAK;gBACnB,MAAM,OAAO,IAAI;gBACjB;YACJ;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,YAAY;gBACR,eAAe,iBAAiB,MAAM;gBACtC,UAAU;gBACV,UAAU;gBACV,SAAS,iBAAiB,MAAM,GAAG,CAAC,WAAW,QAAQ;YAC3D;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS,EAAE;YAAE,YAAY,CAAC;QAAE;IAC3D;AACJ"}}]
}