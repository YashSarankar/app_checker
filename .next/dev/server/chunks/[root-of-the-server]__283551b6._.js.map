{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yashs/development/app_checker/src/app/api/keywords/route.js"],"sourcesContent":["import gplay from 'google-play-scraper';\r\nimport { NextResponse } from 'next/server';\r\n\r\nexport async function POST(request) {\r\n    try {\r\n        const { appId, term, country = 'us', lang = 'en' } = await request.json();\r\n\r\n        if (!appId || !term) {\r\n            return NextResponse.json({ error: 'appId and term are required' }, { status: 400 });\r\n        }\r\n\r\n        // Search through top 250 apps for the keyword\r\n        let finalPosition = '250+';\r\n        let foundRegion = null;\r\n\r\n        const searchResults = await gplay.search({\r\n            term,\r\n            num: 250,\r\n            country,\r\n            lang\r\n        });\r\n\r\n        const position = searchResults.findIndex(item => item.appId === appId) + 1;\r\n\r\n        if (position > 0) {\r\n            finalPosition = position;\r\n            foundRegion = country;\r\n        }\r\n\r\n        return NextResponse.json({\r\n            term,\r\n            position: finalPosition,\r\n            region: foundRegion,\r\n            timestamp: new Date().toISOString()\r\n        });\r\n    } catch (error) {\r\n        console.error('Keyword error:', error);\r\n        return NextResponse.json({ error: 'Failed to find ranking' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAO;IAC9B,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,UAAU,IAAI,EAAE,OAAO,IAAI,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEvE,IAAI,CAAC,SAAS,CAAC,MAAM;YACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACrF;QAEA,8CAA8C;QAC9C,IAAI,gBAAgB;QACpB,IAAI,cAAc;QAElB,MAAM,gBAAgB,MAAM,+JAAK,CAAC,MAAM,CAAC;YACrC;YACA,KAAK;YACL;YACA;QACJ;QAEA,MAAM,WAAW,cAAc,SAAS,CAAC,CAAA,OAAQ,KAAK,KAAK,KAAK,SAAS;QAEzE,IAAI,WAAW,GAAG;YACd,gBAAgB;YAChB,cAAc;QAClB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB;YACA,UAAU;YACV,QAAQ;YACR,WAAW,IAAI,OAAO,WAAW;QACrC;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAChF;AACJ"}}]
}