{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yashs/development/app_checker/src/app/tracker/page.js"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { ArrowLeft, Loader2, Hash, Trophy, Star, Download } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { useSearchParams } from 'next/navigation'\r\nimport { Suspense } from 'react'\r\n\r\nfunction TrackerContent() {\r\n    const searchParams = useSearchParams()\r\n    const appId = searchParams.get('appId')\r\n    const initialTitle = searchParams.get('title')\r\n    const initialIcon = searchParams.get('icon')\r\n    const initialDeveloper = searchParams.get('developer')\r\n\r\n    const [keyword, setKeyword] = useState('')\r\n    const [isCheckingRank, setIsCheckingRank] = useState(false)\r\n    const [rankResult, setRankResult] = useState(null)\r\n    const [appDetails, setAppDetails] = useState(null)\r\n    const [isLoadingDetails, setIsLoadingDetails] = useState(false)\r\n    const [history, setHistory] = useState([])\r\n\r\n    useEffect(() => {\r\n        if (appId) {\r\n            fetchAppDetails()\r\n            loadHistory()\r\n        }\r\n    }, [appId])\r\n\r\n    const fetchAppDetails = async (forceRefresh = false) => {\r\n        if (typeof window !== 'undefined' && !forceRefresh) {\r\n            const cached = localStorage.getItem(`details_${appId}`)\r\n            if (cached) {\r\n                const { data, timestamp } = JSON.parse(cached)\r\n                const isFresh = Date.now() - timestamp < 24 * 60 * 60 * 1000 // 24 hours\r\n                if (isFresh) {\r\n                    setAppDetails(data)\r\n                    return\r\n                }\r\n            }\r\n        }\r\n\r\n        setIsLoadingDetails(true)\r\n        try {\r\n            const { data } = await axios.get(`/api/apps/details?appId=${appId}`)\r\n            setAppDetails(data)\r\n            if (typeof window !== 'undefined') {\r\n                localStorage.setItem(`details_${appId}`, JSON.stringify({\r\n                    data,\r\n                    timestamp: Date.now()\r\n                }))\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to fetch details')\r\n        } finally {\r\n            setIsLoadingDetails(false)\r\n        }\r\n    }\r\n\r\n    const loadHistory = () => {\r\n        if (typeof window !== 'undefined') {\r\n            const savedHistory = localStorage.getItem(`history_${appId}`)\r\n            if (savedHistory) setHistory(JSON.parse(savedHistory))\r\n        }\r\n    }\r\n\r\n    const saveToHistory = (result) => {\r\n        if (typeof window !== 'undefined') {\r\n            const newEntry = { ...result, id: Date.now(), timestamp: new Date().toISOString() }\r\n            const updatedHistory = [newEntry, ...history].slice(0, 10)\r\n            setHistory(updatedHistory)\r\n            localStorage.setItem(`history_${appId}`, JSON.stringify(updatedHistory))\r\n        }\r\n    }\r\n\r\n    const checkRank = async (e, customTerm = null, forceRefresh = false) => {\r\n        if (e) e.preventDefault()\r\n        const termToCheck = customTerm || keyword.trim()\r\n        if (!appId || !termToCheck) return\r\n\r\n        if (customTerm) setKeyword(termToCheck)\r\n\r\n        // Check if we have a fresh result in history (last 1 hour)\r\n        if (!forceRefresh) {\r\n            const existingEntry = history.find(h => h.term.toLowerCase() === termToCheck.toLowerCase())\r\n            if (existingEntry) {\r\n                const isFresh = Date.now() - new Date(existingEntry.timestamp).getTime() < 60 * 60 * 1000 // 1 hour\r\n                if (isFresh) {\r\n                    setRankResult(existingEntry)\r\n                    return\r\n                }\r\n            }\r\n        }\r\n\r\n        setIsCheckingRank(true)\r\n        setRankResult(null)\r\n        try {\r\n            const { data } = await axios.post('/api/keywords', { appId, term: termToCheck })\r\n            setRankResult(data)\r\n            saveToHistory(data)\r\n        } catch (error) {\r\n            console.error('Failed to check rank')\r\n        } finally {\r\n            setIsCheckingRank(false)\r\n        }\r\n    }\r\n\r\n    if (!appId) return (\r\n        <div className=\"flex flex-col items-center justify-center py-20 text-[var(--text-muted)]\">\r\n            <p className=\"font-medium text-sm\">No app selected</p>\r\n            <Link href=\"/\" className=\"mt-4 text-blue-600 hover:text-blue-700 text-sm font-medium\">Return Home</Link>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[var(--bg)]\">\r\n            <div className=\"max-w-5xl mx-auto px-6 py-8\">\r\n                {/* Header */}\r\n                <header className=\"mb-8\">\r\n                    <Link\r\n                        href=\"/\"\r\n                        className=\"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6 font-medium transition-colors\"\r\n                    >\r\n                        <ArrowLeft className=\"w-4 h-4\" />\r\n                        Apps\r\n                    </Link>\r\n\r\n                    <div className=\"flex items-center gap-6 mb-6\">\r\n                        <img\r\n                            src={appDetails?.icon || initialIcon}\r\n                            className=\"w-20 h-20 rounded-2xl shadow-md\"\r\n                            alt={appDetails?.title || initialTitle}\r\n                        />\r\n                        <div className=\"flex-1\">\r\n                            <h1 className=\"text-3xl font-semibold text-[var(--text-main)] mb-1 tracking-tight\">\r\n                                {appDetails?.title || initialTitle}\r\n                            </h1>\r\n                            <p className=\"text-[var(--text-muted)]\">{appDetails?.developer || initialDeveloper}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Stats */}\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"glass-card p-4 min-w-0\">\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                <Star className=\"w-4 h-4 text-yellow-500 flex-shrink-0\" />\r\n                                <span className=\"text-sm text-[var(--text-muted)] font-medium truncate\">Rating</span>\r\n                            </div>\r\n                            <p className=\"text-xl md:text-2xl font-semibold text-[var(--text-main)] truncate\">\r\n                                {appDetails?.score?.toFixed(1) || '—'}\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"glass-card p-4 min-w-0\">\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                <Download className=\"w-4 h-4 text-blue-500 flex-shrink-0\" />\r\n                                <span className=\"text-sm text-[var(--text-muted)] font-medium truncate\">Installs</span>\r\n                            </div>\r\n                            <p className=\"text-xl md:text-2xl font-semibold text-[var(--text-main)] truncate\">\r\n                                {appDetails?.installs || '—'}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    {/* Main Content */}\r\n                    <div className=\"lg:col-span-2 space-y-6\">\r\n                        {/* Keyword Tracker */}\r\n                        <div className=\"glass-card p-6\">\r\n                            <h2 className=\"text-lg font-semibold text-[var(--text-main)] mb-4 flex items-center gap-2\">\r\n                                <Hash className=\"w-5 h-5 text-blue-600\" />\r\n                                Keyword Ranking\r\n                            </h2>\r\n\r\n                            <form onSubmit={checkRank} className=\"mb-4\">\r\n                                <div className=\"flex gap-3\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Enter keyword...\"\r\n                                        className=\"pro-input flex-1\"\r\n                                        value={keyword}\r\n                                        onChange={(e) => setKeyword(e.target.value)}\r\n                                    />\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={isCheckingRank || !keyword.trim()}\r\n                                        className=\"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-[var(--input-bg)] disabled:text-[var(--text-muted)] text-white rounded-lg font-medium transition-colors\"\r\n                                    >\r\n                                        {isCheckingRank ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : \"Check\"}\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n\r\n                            <p className=\"text-sm text-[var(--text-muted)]\">\r\n                                Search top 250 apps for this keyword\r\n                            </p>\r\n                        </div>\r\n\r\n                        {/* Rank Result */}\r\n                        <AnimatePresence mode=\"wait\">\r\n                            {rankResult && (\r\n                                <motion.div\r\n                                    key={rankResult.term}\r\n                                    initial={{ opacity: 0, y: 10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    exit={{ opacity: 0 }}\r\n                                    className=\"glass-card p-8 text-center\"\r\n                                >\r\n                                    <p className=\"text-sm font-medium text-[var(--text-muted)] mb-3 uppercase tracking-wide\">\r\n                                        Rank for \"{rankResult.term}\"\r\n                                    </p>\r\n                                    <div className=\"text-6xl font-bold text-[var(--text-main)] mb-2\">\r\n                                        {rankResult.position === '250+' ? '250+' : `#${rankResult.position}`}\r\n                                    </div>\r\n                                    <p className=\"text-sm text-[var(--text-muted)]\">\r\n                                        {rankResult.position === '250+' ? \"Not found in top 250\" : \"Currently ranked\"}\r\n                                    </p>\r\n                                </motion.div>\r\n                            )}\r\n                        </AnimatePresence>\r\n                    </div>\r\n\r\n                    {/* Sidebar */}\r\n                    <div className=\"glass-card p-5\">\r\n                        <h3 className=\"text-base font-semibold text-[var(--text-main)] mb-4\">Recent Checks</h3>\r\n                        <div className=\"space-y-2\">\r\n                            {history.map((entry) => (\r\n                                <div\r\n                                    key={entry.id}\r\n                                    onClick={() => checkRank(null, entry.term)}\r\n                                    className=\"p-3 bg-[var(--input-bg)] hover:bg-[var(--card-border)] rounded-lg cursor-pointer transition-colors\"\r\n                                >\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <span className=\"text-sm font-medium text-[var(--text-main)] truncate flex-1\">\r\n                                            {entry.term}\r\n                                        </span>\r\n                                        <span className={`text-sm font-semibold ml-2 ${entry.position === '250+' ? 'text-[var(--text-muted)]' : 'text-blue-600'}`}>\r\n                                            {entry.position === '250+' ? '—' : `#${entry.position}`}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {history.length === 0 && (\r\n                                <p className=\"text-sm text-[var(--text-muted)] text-center py-4\">\r\n                                    No checks yet\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default function KeywordTrackerPage() {\r\n    return (\r\n        <Suspense fallback={\r\n            <div className=\"flex justify-center py-20\">\r\n                <Loader2 className=\"w-8 h-8 animate-spin text-[var(--text-muted)]\" />\r\n            </div>\r\n        }>\r\n            <TrackerContent />\r\n        </Suspense>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}